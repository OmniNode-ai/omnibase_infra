# NodeCodegenMetricsReducerReducer Contract - ONEX v2.0 Compliant
# Generated: 2025-11-05

# Required fields for ModelContractReducer
name: "codegen_metrics_reducer"
version:
  major: 1
  minor: 0
  patch: 0
description: "Aggregates code generation metrics from event streams for analytics, monitoring, and trend analysis. Consumes CODEGEN_* events from Kafka, aggregates by time window (hourly/daily/weekly), computes performance, quality, and cost metrics, and publishes GENERATION_METRICS_RECORDED events. Architecture: Pure aggregation logic (MetricsAggregator) + coordination I/O via MixinIntentPublisher + Intent executor publishes via EFFECT."
node_type: "REDUCER"

# Input/Output Models (required by omnibase_core) - must be strings (model class names)
input_model: "ModelCodegenMetricsReducerRequest"
output_model: "ModelCodegenMetricsReducerResponse"

# State schemas (required by ONEX v2.0)
input_state:
  $ref: "contracts/codegen_metrics_reducer-input-state.yaml"
output_state:
  $ref: "contracts/codegen_metrics_reducer-output-state.yaml"

# Tool specification (required by omnibase_core)
tool_specification:
  tool_name: "codegen_metrics_reducer"
  main_tool_class: "omninode_bridge.nodes.codegen_metrics_reducer.v1_0_0.node.NodeCodegenMetricsReducerReducer"


# Legacy fields for compatibility
node_name: codegen_metrics_reducer
node_version:
  major: 1
  minor: 0
  patch: 0

contract_name: codegen_metrics_reducer_contract
author: OmniNode Code Generation
created_at: "2025-11-05"

# Core Metadata
metadata:
  domain: "code_generation"
  generated: true
  generated_at: "2025-11-05T18:02:41.557888+00:00"
  tags:
    - "Streaming aggregation with windowed processing"
    - "Time-based windowing (hourly/daily/weekly)"
    - "Multi-dimensional metrics computation (performance/quality/cost)"
    - "Batch processing with configurable batch sizes"
    - "Event type parsing and validation"
    - ">1000 events/second aggregation throughput"
    - "<100ms aggregation latency for 1000 items"
    - "Async streaming with AsyncIterator support"
    - "Pure domain logic separation (MetricsAggregator)"
    - "Intent pattern for coordination I/O"
    - "IntentExecutor EFFECT delegation for event publishing"
    - "Health checks via MixinHealthCheck (omnibase_core)"
    - "Metrics collection via MixinMetrics (omnibase_core)"
    - "Event-driven architecture via MixinEventDrivenNode (omnibase_core)"
    - "Intent publishing via MixinIntentPublisher (omnibase_core)"
    - "Consul service registration and health checks"
    - "Service discovery with metadata tagging"
    - "Structured logging with correlation tracking"
    - "Performance monitoring (duration/throughput)"
    - "Aggregation metrics tracking"
    - "Environment-based configuration (Consul host/port)"
    - "Configurable window types and batch sizes"
    - "Health check mode for testing"

# Operations supported by this node
operations:
  - "aggregate_metrics"
  - "stream_events"
  - "publish_intents"

# Performance Requirements
performance_requirements:
  execution_time:
    target_ms: 100
    max_ms: 1000
  memory_usage:
    target_mb: 128
    max_mb: 512

# Testing Requirements
testing:
  unit_tests:
    coverage_target: 85
    required: true
  integration_tests:
    required: true
