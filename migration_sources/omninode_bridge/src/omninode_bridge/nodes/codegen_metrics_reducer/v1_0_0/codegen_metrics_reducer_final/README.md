# NodeCodegenMetricsReducerReducer

## Overview

Aggregates code generation metrics from event streams for analytics, monitoring, and trend analysis. Consumes CODEGEN_* events from Kafka, aggregates by time window (hourly/daily/weekly), computes performance, quality, and cost metrics, and publishes GENERATION_METRICS_RECORDED events. Architecture: Pure aggregation logic (MetricsAggregator) + coordination I/O via MixinIntentPublisher + Intent executor publishes via EFFECT.

**Node Type**: reducer
**Domain**: code_generation
**Generated**: 2025-11-05T18:02:41.557888+00:00

## Operations

- `aggregate_metrics`
- `stream_events`
- `publish_intents`

## Features

- Streaming aggregation with windowed processing
- Time-based windowing (hourly/daily/weekly)
- Multi-dimensional metrics computation (performance/quality/cost)
- Batch processing with configurable batch sizes
- Event type parsing and validation
- >1000 events/second aggregation throughput
- <100ms aggregation latency for 1000 items
- Async streaming with AsyncIterator support
- Pure domain logic separation (MetricsAggregator)
- Intent pattern for coordination I/O
- IntentExecutor EFFECT delegation for event publishing
- Health checks via MixinHealthCheck (omnibase_core)
- Metrics collection via MixinMetrics (omnibase_core)
- Event-driven architecture via MixinEventDrivenNode (omnibase_core)
- Intent publishing via MixinIntentPublisher (omnibase_core)
- Consul service registration and health checks
- Service discovery with metadata tagging
- Structured logging with correlation tracking
- Performance monitoring (duration/throughput)
- Aggregation metrics tracking
- Environment-based configuration (Consul host/port)
- Configurable window types and batch sizes
- Health check mode for testing

## Performance Requirements

- latency_p99_ms: 100
- throughput_rps: 1000
- max_memory_mb: 512
- max_cpu_percent: 25

## Usage

```python
from omninode_bridge.nodes.codegen_metrics_reducer.v1_0_0 import NodeCodegenMetricsReducerReducer
from omnibase_core.models.core import ModelContainer
from omnibase_core.models.contracts.model_contract_reducer import ModelContractReducer
from omnibase_core.enums.enum_node_type import EnumNodeType
from uuid import uuid4

# Initialize container with configuration
container = ModelContainer(
    value={"environment": "production", "log_level": "INFO"},
    container_type="config"
)
node = NodeCodegenMetricsReducerReducer(container)

# Create contract with complete configuration
contract = ModelContractReducer(
    name="aggregate_metrics",
    version={"major": 1, "minor": 0, "patch": 0},
    description="Execute aggregate_metrics",
    node_type=EnumNodeType.REDUCER,
    input_model="ModelNodeCodegenMetricsReducerReducerInput",
    output_model="ModelNodeCodegenMetricsReducerReducerOutput",
    correlation_id=uuid4(),
    execution_id=uuid4()
)

# Execute the operation
result = await node.execute_reducer(contract)
print(f"Result: {result}")
```

## Testing

```bash
pytest tests/test_node.py -v
```

## ONEX v2.0 Compliance

✅ Suffix-based naming: `NodeCodegenMetricsReducerReducer`
✅ Contract-driven architecture
✅ Event-driven patterns
✅ Comprehensive error handling
✅ Performance monitoring

---

Generated by OmniNode Code Generation Pipeline
