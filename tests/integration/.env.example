# =============================================================================
# ONEX Infrastructure - Integration Tests Environment Configuration
# =============================================================================
# Copy this file to .env in the tests/integration/ directory and configure
# with your specific values for running integration tests.
#
# USAGE:
#   cp tests/integration/.env.example tests/integration/.env
#   # Edit with your values
#   source tests/integration/.env
#   pytest tests/integration/ -v
#
# SKIP BEHAVIOR:
#   Tests are designed to skip gracefully when infrastructure is unavailable.
#   Missing or unset environment variables will cause tests to be skipped
#   rather than fail, enabling CI/CD pipelines to run without hard failures.
#
# SECURITY WARNING:
#   - Replace ALL placeholder values before use
#   - Keep .env files out of version control (already in .gitignore)
#   - NEVER commit real credentials to the repository
# =============================================================================

# =============================================================================
# PostgreSQL Database Configuration (test_db_handler_integration.py)
# =============================================================================
# Required for database handler integration tests.
# Tests will skip if POSTGRES_HOST or POSTGRES_PASSWORD are not set.
#
# For remote infrastructure:
#   POSTGRES_HOST=<your-server-ip>
#   POSTGRES_PORT=5436
#
# For local Docker:
#   POSTGRES_HOST=localhost
#   POSTGRES_PORT=5432

POSTGRES_HOST=your-postgres-host
POSTGRES_PORT=5432
# Preferred: set OMNIBASE_INFRA_DB_URL instead of individual vars
# OMNIBASE_INFRA_DB_URL=postgresql://postgres:your-secure-password@your-postgres-host:5432/omnibase_infra
POSTGRES_DATABASE=omnibase_infra
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your-secure-password

# =============================================================================
# Consul Service Discovery Configuration (test_consul_handler_integration.py)
# =============================================================================
# Required for Consul handler integration tests.
# Tests will skip if CONSUL_HOST is not set or server is unreachable.
#
# For remote infrastructure:
#   CONSUL_HOST=<your-server-ip>
#   CONSUL_PORT=28500
#
# For local Docker:
#   CONSUL_HOST=localhost
#   CONSUL_PORT=8500
#
# CONSUL_PORT handling:
#   - Defaults to 8500 if not set
#   - Defaults to 8500 if set to a non-integer value (defensive handling)

CONSUL_HOST=your-consul-host
CONSUL_PORT=8500
CONSUL_SCHEME=http
# CONSUL_TOKEN=your-acl-token  # Optional: ACL token for authenticated access

# =============================================================================
# Vault Secret Management Configuration (test_vault_handler_integration.py)
# =============================================================================
# Required for Vault handler integration tests.
# Tests will skip if VAULT_ADDR or VAULT_TOKEN are not set,
# or if the Vault server is unreachable.
#
# For remote infrastructure:
#   VAULT_ADDR=http://<your-server-ip>:8200
#
# For local Docker:
#   VAULT_ADDR=http://localhost:8200

VAULT_ADDR=http://your-vault-host:8200
VAULT_TOKEN=your-vault-token
# VAULT_NAMESPACE=  # Optional: Vault namespace for enterprise deployments

# =============================================================================
# Kafka / Redpanda Event Bus Configuration (test_kafka_event_bus_integration.py)
# =============================================================================
# Required for Kafka event bus integration tests.
# Tests will skip if KAFKA_BOOTSTRAP_SERVERS is not set.
#
# For remote infrastructure (external port):
#   KAFKA_BOOTSTRAP_SERVERS=<your-server-ip>:29092
#
# For local Docker (internal port):
#   KAFKA_BOOTSTRAP_SERVERS=localhost:9092

KAFKA_BOOTSTRAP_SERVERS=your-kafka-host:9092

# Optional Kafka settings
# KAFKA_TIMEOUT_SECONDS=30
# KAFKA_MAX_RETRY_ATTEMPTS=3

# =============================================================================
# Docker Integration Tests (tests/integration/docker/)
# =============================================================================
# Docker integration tests use testcontainers and require Docker daemon.
# No environment variables needed - tests will skip if Docker is unavailable.
#
# Projector integration tests also use testcontainers for PostgreSQL.

# =============================================================================
# Additional Notes
# =============================================================================
#
# HTTP Handler Tests:
#   - test_http_handler_integration.py uses pytest-httpserver (mock server)
#   - No environment variables required - tests always run
#
# Timeout Tests:
#   - tests/integration/timeouts/ uses in-memory mocks
#   - No environment variables required - tests always run
#
# Runtime Tests:
#   - tests/integration/runtime/ uses in-memory mocks and fixtures
#   - No environment variables required - tests always run
#
# For full configuration options, see the root .env.example file.
