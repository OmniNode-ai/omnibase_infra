# =============================================================================
# ONEX Infrastructure Runtime - Environment Configuration
# =============================================================================
# Copy this file to .env and customize for your environment.
# All values shown are defaults - uncomment and modify as needed.
#
# ⚠️ SECURITY WARNING:
#   - ALL placeholder values (marked __REPLACE_WITH_*__) MUST be changed
#   - NEVER use these placeholders in ANY environment (dev/staging/prod)
#   - Generate secure random passwords using: openssl rand -base64 32
#   - Keep .env file out of version control (already in .gitignore)
#
# Usage:
#   cp .env.example .env
#   # Edit .env with your secure values (replace ALL __REPLACE_WITH_*__ placeholders)
#   docker compose -f docker-compose.runtime.yml up -d
# =============================================================================

# =============================================================================
# Build Configuration
# =============================================================================
# GitHub token for private package installation during Docker build.
# Required for installing omnibase-core and omnibase-spi from private repos.
# ⚠️ NOTE: Set this in your environment or shell, not in .env file
# For Docker builds: export GITHUB_TOKEN=$(cat ~/.github_token)
# The token is passed via BuildKit secret mount, not as a build arg.
GITHUB_TOKEN=__REPLACE_WITH_GITHUB_TOKEN__

# =============================================================================
# Runtime Version
# =============================================================================
# Version tag for container labels (used for tracking deployments)
# RUNTIME_VERSION=0.1.0

# =============================================================================
# Network Configuration
# =============================================================================
# Docker network name for inter-service communication.
# Must match the network created by omninode-bridge infrastructure.
# DOCKER_NETWORK=omninode-bridge-network

# Remote host override for extra_hosts mappings.
# Set to IP address when connecting to services on a different host.
# Default (host-gateway) resolves to the Docker host.
# REMOTE_HOST=host-gateway

# =============================================================================
# Kafka / Redpanda Event Bus Configuration
# =============================================================================
# Bootstrap servers for Kafka/Redpanda connection.
# Comma-separated list for multiple brokers: host1:9092,host2:9092
# KAFKA_BOOTSTRAP_SERVERS=omninode-bridge-redpanda:9092

# =============================================================================
# PostgreSQL Database Configuration
# =============================================================================
# Database connection parameters for persistent storage.
# POSTGRES_HOST=omninode-bridge-postgres
# POSTGRES_PORT=5432
# POSTGRES_DATABASE=omninode_bridge
# POSTGRES_USER=postgres

# REQUIRED - SECURITY: Must be set explicitly, no default value allowed
# ⚠️ CRITICAL: Replace this placeholder before ANY deployment!
# Generate a secure password: openssl rand -base64 32
# NEVER use 'changeme' or similar weak passwords in any environment
POSTGRES_PASSWORD=__REPLACE_WITH_SECURE_PASSWORD__

# =============================================================================
# Consul Service Discovery Configuration
# =============================================================================
# Consul agent connection for service registration and discovery.
# CONSUL_HOST=omninode-bridge-consul
# CONSUL_PORT=8500
# CONSUL_SCHEME=http

# =============================================================================
# Vault Secret Management Configuration
# =============================================================================
# HashiCorp Vault connection for secure secret retrieval.
# VAULT_ADDR=http://omninode-bridge-vault:8200

# REQUIRED - SECURITY: Must be set explicitly, no default value allowed
# ⚠️ CRITICAL: Replace this placeholder before ANY deployment!
# For development: Use Vault's root token from initial setup
# For production: Use a properly scoped Vault token with minimal permissions
# NEVER commit real Vault tokens to version control
VAULT_TOKEN=__REPLACE_WITH_VAULT_TOKEN__

# =============================================================================
# Redis / Valkey Cache Configuration
# =============================================================================
# Redis connection for caching and pub/sub operations.
# REDIS_HOST=omninode-bridge-redis
# REDIS_PORT=6379

# REQUIRED - SECURITY: Must be set explicitly, no default value allowed
# ⚠️ CRITICAL: Replace this placeholder before ANY deployment!
# Generate a secure password: openssl rand -base64 32
# NEVER use 'changeme' or similar weak passwords in any environment
REDIS_PASSWORD=__REPLACE_WITH_SECURE_PASSWORD__

# =============================================================================
# ONEX Runtime Configuration
# =============================================================================
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
# ONEX_LOG_LEVEL=INFO

# Environment name: development, staging, production
# ONEX_ENVIRONMENT=development

# HTTP port for health check server inside the container.
# This is the internal port the runtime listens on (default: 8085).
# Note: RUNTIME_MAIN_PORT below maps this to the host.
# ONEX_HTTP_PORT=8085

# =============================================================================
# Main Runtime Service Configuration
# =============================================================================
# Host port mapping for the main runtime service
# RUNTIME_MAIN_PORT=8085

# Kafka topics for main runtime
# ONEX_INPUT_TOPIC=requests
# ONEX_OUTPUT_TOPIC=responses

# Consumer group ID for main runtime
# ONEX_GROUP_ID=onex-runtime-main

# =============================================================================
# Effects Runtime Service Configuration
# =============================================================================
# Host port mapping for the effects runtime service
# RUNTIME_EFFECTS_PORT=8086

# Kafka topics for effects runtime
# ONEX_EFFECTS_INPUT_TOPIC=effect-requests
# ONEX_EFFECTS_OUTPUT_TOPIC=effect-responses

# Consumer group ID for effects runtime
# ONEX_EFFECTS_GROUP_ID=onex-runtime-effects

# =============================================================================
# Worker Runtime Service Configuration
# =============================================================================
# Number of worker replicas (for horizontal scaling)
# WORKER_REPLICAS=2

# Kafka topics for worker runtime
# ONEX_WORKER_INPUT_TOPIC=worker-requests
# ONEX_WORKER_OUTPUT_TOPIC=worker-responses

# Consumer group ID for workers
# ONEX_WORKER_GROUP_ID=onex-runtime-workers

# =============================================================================
# OpenTelemetry Observability Configuration
# =============================================================================
# OTLP exporter endpoint for traces and metrics
# OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317

# Service name for tracing identification
# OTEL_SERVICE_NAME=omnibase-infra-runtime

# Exporter types: otlp, console, none
# OTEL_TRACES_EXPORTER=otlp
# OTEL_METRICS_EXPORTER=otlp
